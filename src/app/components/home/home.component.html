<app-header></app-header>
<app-search></app-search>

<div class="category-filter">
  <select [(ngModel)]="selectedCategoryId" (change)="onCategoryChange()">
    <option [ngValue]="null">Sve kategorije</option>
    <option *ngFor="let c of categories" [ngValue]="c.id">
      {{ c.name }}
    </option>
  </select>
</div>

<ul>
  <li *ngFor="let product of products">

    <a routerLink="/products/{{product.id}}">
      <img [src]="'assets/images/' + product.image" alt="">
      <div class="content">

        <div class="name">
          {{ product.name }}
        </div>

        <div class="category">
          {{ product.category.name }}
          {{ product.material }}
        </div>

        <div class="price">
          <span>
            {{ product.price | currency:'RSD':'code':'1.2-2' }}
          </span>
        </div>

        <!-- PRODATO LABEL -->
        <div *ngIf="product.stock === 0"
             style="color:red; font-weight:bold; margin-top:5px;">
          PRODATO
        </div>

      </div>
    </a>

    <button class="add-to-cart"
            (click)="buyProducts(product)"
            [disabled]="product.stock === 0"
            [ngStyle]="{ opacity: product.stock === 0 ? 0.5 : 1 }">
      Dodaj u korpu
    </button>

  </li>
</ul>
